[[ ${OSTYPE:-`uname -o`} =~ [lL]inux ]] || return 0

PATHSEP=':'

#TODO support Debian/WSL?
alias yum.vars="python -c 'import yum, pprint; yb = yum.YumBase(); pprint.pprint(yb.conf.yumvar, width=1)'"

function proc.cache-hit () {
  [ $EUID -eq 0 ] || { echo "insufficent privileges (root)"; exit 2; }
  which bc >/dev/null || exit

  read rchar wchar rbytes wbytes <<< $( cat /proc/${1:?}/io | awk '
      $1 == "rchar:" { print $2 }
      $1 == "wchar:" { print $2 }
      $1 == "read_bytes:" { print $2 }
      $1 == "write_bytes:" { print $2 }'
    )
  echo -n "READ "; bc <<< "scale=3; (1 - $rbytes / $rchar)"
  echo -n "WRITE "; bc <<< "scale=3; (1 - $wbytes / $wchar)"
}

return 0
# vim: expandtab:ts=4:sw=4
