is_exec aws || return 0

is_exec ec2-version ||
    for v in /usr/local/ec2-api-tools*; do
      [ -d "$v/bin" ] && addPath "$v/bin"
    done

link=`type -p aws_bash_completer 2>/dev/null` &&
    for bc in {/etc/,"$HOME"/.}bash_completion.d; do
      [ -e "$bc/${link##*/}" ] && break

      # skip since not 'root'
      [[ "$bc" =~ ^/etc  && `id -u` -eq 0 ]] || continue

      mkdir -p "$bc"
      ln -s "$link" "$bc"/
    done

# assume-role session credentials expire in 1h (default)
export AWS_SESSION_DURATION=$((3600 * 8))

source ${BASH_SOURCE/bashrc/functions} || return

alias aws.clearenv='aws.profile RESET'

# vim: expandtab:ts=8:sw=4
